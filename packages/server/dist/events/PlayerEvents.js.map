{
  "version": 3,
  "sources": ["../../../../src/server/events/PlayerEvents.ts"],
  "sourcesContent": ["import { Logger } from \"../utils/Logger\";\nimport { User } from \"../models/User\";\nimport { PlayerUtils } from \"../utils/PlayerUtils\";\nimport { AdminConfig } from \"../config/AdminLevels\";\nimport { CommandManager } from \"../commands/CommandManager\";\nimport { AuthService } from \"../services/AuthService\";\n\nexport class PlayerEvents {\n    static init() {\n        mp.events.add(\"playerJoin\", async (player: PlayerMp) => {\n            const user = await User.findOneBy({ username: player.name });\n            \n            player.outputChatBox(\"!{#AA0000}========================================\");\n            player.outputChatBox(`!{#FFFFFF}Bine ai venit pe !{#AA0000}ServerServeros!{#FFFFFF}, ${player.name}!`);\n            \n            if (user) {\n                player.outputChatBox(\"!{#FFFFFF}Acest nume este !{#55FF55}inregistrat!{#FFFFFF}. Foloseste !{#55FF55}/login <parola>!{#FFFFFF}.\");\n            } else {\n                player.outputChatBox(\"!{#FFFFFF}Acest nume !{#FF9900}nu este inregistrat!{#FFFFFF}. Foloseste !{#FF9900}/register <parola>!{#FFFFFF}.\");\n            }\n            player.outputChatBox(\"!{#AA0000}========================================\");\n            \n            Logger.info(`[JOIN] ${player.name} (ID: ${player.id}) s-a conectat.`);\n        });\n\n        mp.events.add(\"playerChat\", (player: PlayerMp, message: string) => {\n            const db = PlayerUtils.getDb(player);\n            if (!db) {\n                player.outputChatBox(\"!{#AA0000}Eroare: !{#FFFFFF}Trebuie sa fii logat pentru a vorbi.\");\n                return;\n            }\n\n            const config = AdminConfig[db.adminLevel as keyof typeof AdminConfig];\n            const formattedMsg = `!{#BBBBBB}[${player.id}] ${config.color}${config.title}${player.name}: !{#FFFFFF}${message}`;\n\n            mp.players.forEachInRange(player.position, 20, (nearPlayer) => {\n                nearPlayer.outputChatBox(formattedMsg);\n            });\n            \n            Logger.info(`[CHAT] ${player.name}: ${message}`);\n        });\n\n        mp.events.add(\"playerCommand\", (player: PlayerMp, message: string) => {\n            CommandManager.handleCommand(player, message);\n        });\n\n        mp.events.add(\"playerQuit\", async (player: PlayerMp, exitType: string) => {\n            const db = PlayerUtils.getDb(player);\n            if (db) {\n                await AuthService.savePlayer(player);\n                Logger.info(`[QUIT] ${player.name} a parasit serverul (${exitType}).`);\n            }\n        });\n    }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAuB;AACvB,kBAAqB;AACrB,yBAA4B;AAC5B,yBAA4B;AAC5B,4BAA+B;AAC/B,yBAA4B;AAErB,MAAM,aAAa;AAAA,EACtB,OAAO,OAAO;AACV,OAAG,OAAO,IAAI,cAAc,OAAO,WAAqB;AACpD,YAAM,OAAO,MAAM,iBAAK,UAAU,EAAE,UAAU,OAAO,KAAK,CAAC;AAE3D,aAAO,cAAc,oDAAoD;AACzE,aAAO,cAAc,kEAAkE,OAAO,IAAI,GAAG;AAErG,UAAI,MAAM;AACN,eAAO,cAAc,2GAA2G;AAAA,MACpI,OAAO;AACH,eAAO,cAAc,iHAAiH;AAAA,MAC1I;AACA,aAAO,cAAc,oDAAoD;AAEzE,2BAAO,KAAK,UAAU,OAAO,IAAI,SAAS,OAAO,EAAE,iBAAiB;AAAA,IACxE,CAAC;AAED,OAAG,OAAO,IAAI,cAAc,CAAC,QAAkB,YAAoB;AAC/D,YAAM,KAAK,+BAAY,MAAM,MAAM;AACnC,UAAI,CAAC,IAAI;AACL,eAAO,cAAc,kEAAkE;AACvF;AAAA,MACJ;AAEA,YAAM,SAAS,+BAAY,GAAG,UAAsC;AACpE,YAAM,eAAe,cAAc,OAAO,EAAE,KAAK,OAAO,KAAK,GAAG,OAAO,KAAK,GAAG,OAAO,IAAI,eAAe,OAAO;AAEhH,SAAG,QAAQ,eAAe,OAAO,UAAU,IAAI,CAAC,eAAe;AAC3D,mBAAW,cAAc,YAAY;AAAA,MACzC,CAAC;AAED,2BAAO,KAAK,UAAU,OAAO,IAAI,KAAK,OAAO,EAAE;AAAA,IACnD,CAAC;AAED,OAAG,OAAO,IAAI,iBAAiB,CAAC,QAAkB,YAAoB;AAClE,2CAAe,cAAc,QAAQ,OAAO;AAAA,IAChD,CAAC;AAED,OAAG,OAAO,IAAI,cAAc,OAAO,QAAkB,aAAqB;AACtE,YAAM,KAAK,+BAAY,MAAM,MAAM;AACnC,UAAI,IAAI;AACJ,cAAM,+BAAY,WAAW,MAAM;AACnC,6BAAO,KAAK,UAAU,OAAO,IAAI,wBAAwB,QAAQ,IAAI;AAAA,MACzE;AAAA,IACJ,CAAC;AAAA,EACL;AACJ;",
  "names": []
}

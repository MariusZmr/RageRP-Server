{
  "version": 3,
  "sources": ["../../../../src/server/events/PlayerEvents.ts"],
  "sourcesContent": ["import { Logger } from \"../utils/Logger\";\nimport { AuthService } from \"../services/AuthService\";\nimport { CommandManager } from \"../commands/CommandManager\";\nimport { PlayerUtils } from \"../utils/PlayerUtils\";\nimport { AdminTitles } from \"../config/AdminLevels\";\n\nexport class PlayerEvents {\n    static init() {\n        mp.events.add(\"playerJoin\", (player: PlayerMp) => {\n            Logger.info(`[JOIN] ${player.name} s-a conectat (IP: ${player.ip}).`);\n            player.outputChatBox(\"!{#FFFF00}Bine ai venit pe ServerServeros!\");\n            player.outputChatBox(\"Serverul foloseste TypeScript si MariaDB.\");\n            player.outputChatBox(\"!{#FFFFFF}Foloseste /register <parola> sau /login <parola>.\");\n        });\n\n        mp.events.add(\"playerQuit\", async (player: PlayerMp, exitType: string) => {\n            const user = PlayerUtils.getDb(player);\n            if (user) {\n                await AuthService.savePlayer(player);\n                Logger.info(`[QUIT] ${user.username} a iesit (${exitType}). Date salvate.`);\n            }\n            PlayerUtils.setDb(player, undefined);\n        });\n\n        mp.events.add(\"playerChat\", (player: PlayerMp, message: string) => {\n            const user = PlayerUtils.getDb(player);\n            if (!user) {\n                player.outputChatBox(\"!{#FF0000}Eroare: !{#FFFFFF}Trebuie sa fii logat pentru a scrie.\");\n                return;\n            }\n\n            const title = AdminTitles[user.adminLevel] || \"\";\n            const color = user.adminLevel > 0 ? \"!{#FFD700}\" : \"!{#FFFFFF}\";\n            const formattedMsg = `!{#BBBBBB}[${player.id}] ${title}${color}${user.username} says: !{#FFFFFF}${message}`;\n\n            // Proximity Chat (15 metri)\n            mp.players.forEachInRange(player.position, 15, (nearPlayer) => {\n                nearPlayer.outputChatBox(formattedMsg);\n            });\n            \n            Logger.info(`[CHAT] ${user.username}: ${message}`);\n        });\n\n        mp.events.add(\"playerCommand\", (player: PlayerMp, message: string) => {\n            CommandManager.handleCommand(player, message);\n        });\n    }\n}"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAuB;AACvB,yBAA4B;AAC5B,4BAA+B;AAC/B,yBAA4B;AAC5B,yBAA4B;AAErB,MAAM,aAAa;AAAA,EACtB,OAAO,OAAO;AACV,OAAG,OAAO,IAAI,cAAc,CAAC,WAAqB;AAC9C,2BAAO,KAAK,UAAU,OAAO,IAAI,sBAAsB,OAAO,EAAE,IAAI;AACpE,aAAO,cAAc,4CAA4C;AACjE,aAAO,cAAc,2CAA2C;AAChE,aAAO,cAAc,6DAA6D;AAAA,IACtF,CAAC;AAED,OAAG,OAAO,IAAI,cAAc,OAAO,QAAkB,aAAqB;AACtE,YAAM,OAAO,+BAAY,MAAM,MAAM;AACrC,UAAI,MAAM;AACN,cAAM,+BAAY,WAAW,MAAM;AACnC,6BAAO,KAAK,UAAU,KAAK,QAAQ,aAAa,QAAQ,kBAAkB;AAAA,MAC9E;AACA,qCAAY,MAAM,QAAQ,MAAS;AAAA,IACvC,CAAC;AAED,OAAG,OAAO,IAAI,cAAc,CAAC,QAAkB,YAAoB;AAC/D,YAAM,OAAO,+BAAY,MAAM,MAAM;AACrC,UAAI,CAAC,MAAM;AACP,eAAO,cAAc,kEAAkE;AACvF;AAAA,MACJ;AAEA,YAAM,QAAQ,+BAAY,KAAK,UAAU,KAAK;AAC9C,YAAM,QAAQ,KAAK,aAAa,IAAI,eAAe;AACnD,YAAM,eAAe,cAAc,OAAO,EAAE,KAAK,KAAK,GAAG,KAAK,GAAG,KAAK,QAAQ,oBAAoB,OAAO;AAGzG,SAAG,QAAQ,eAAe,OAAO,UAAU,IAAI,CAAC,eAAe;AAC3D,mBAAW,cAAc,YAAY;AAAA,MACzC,CAAC;AAED,2BAAO,KAAK,UAAU,KAAK,QAAQ,KAAK,OAAO,EAAE;AAAA,IACrD,CAAC;AAED,OAAG,OAAO,IAAI,iBAAiB,CAAC,QAAkB,YAAoB;AAClE,2CAAe,cAAc,QAAQ,OAAO;AAAA,IAChD,CAAC;AAAA,EACL;AACJ;",
  "names": []
}
